(()=>{"use strict";console.log("BACKGROUND script is running"),chrome.runtime.onInstalled.addListener((()=>{return n=void 0,t=void 0,e=function*(){for(const n of chrome.runtime.getManifest().content_scripts)for(const t of yield chrome.tabs.query({url:n.matches}))chrome.scripting.executeScript({target:{tabId:t.id},files:n.js})},new((o=void 0)||(o=Promise))((function(c,i){function r(n){try{a(e.next(n))}catch(n){i(n)}}function s(n){try{a(e.throw(n))}catch(n){i(n)}}function a(n){var t;n.done?c(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(r,s)}a((e=e.apply(n,t||[])).next())}));var n,t,o,e})),function(){return n=this,t=void 0,e=function*(){const n=yield fetch("https://api.coingecko.com/api/v3/coins/list");return yield n.json()},new((o=void 0)||(o=Promise))((function(c,i){function r(n){try{a(e.next(n))}catch(n){i(n)}}function s(n){try{a(e.throw(n))}catch(n){i(n)}}function a(n){var t;n.done?c(n.value):(t=n.value,t instanceof o?t:new o((function(n){n(t)}))).then(r,s)}a((e=e.apply(n,t||[])).next())}));var n,t,o,e}().then((n=>{!function(n){const t={coins:n};new Promise((n=>{chrome.storage.local.set(t,(()=>{n()}))}))}(n),console.log("Coins fetched")})),function(n){const t={coinIds:[{id:"bitcoin",symbol:"btc",name:"bitcoin"}]};new Promise((n=>{chrome.storage.local.set(t,(()=>{n()}))}))}()})();